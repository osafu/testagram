<div class="form-content form-content-main row">
  <div class="form-content-in col-md-4">

<%= form_for(@post, url: choose_new_or_edit) do |f| %>
  <% if @post.errors.any? %>
    <div class="alert alert-danger">
      <ul>
      <% @post.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <div class="field">
    <%= f.label :content, class: "field-label" do %>
    <i class="fa fa-envelope-o"></i>コメント
    <% end %>
    <%= f.text_field :content %>
  </div>
  <div class="field">
    <%= f.label :picture_title, class: "field-label" do %>
    <i class="fa fa-file-picture-o"></i>画像
    <% end %>
    <%= f.label :picture, class: "btn btn-default" do %>
    <i class="fa fa-upload"></i>ファイルを選択
    <% end %>
    <%= f.file_field :picture, class:"hidden" %>
  </div>
  <%= f.submit "投稿する", class: "btn btn-primary btn-block" %>
<% end %>
</div>
</div>

<div class="form-content form-content-sub row">
  <div class="form-content-in col-md-4">

<p class="link-back"><%= link_to :back, class: "btn btn-link btn-back" do %>
<i class="fa fa-arrow-left"></i>前の画面に戻る
</p>

</div>
</div>

<% end %>

<script>
$(document).on('change', ':file', function() {
    var input = $(this),
    numFiles = input.get(0).files ? input.get(0).files.length : 1,
    label = input.val().replace(/\\/g, '/').replace(/.*\//, '');
    if (!($('.selected-file').length)){
      $('label[for="post_picture"]').before("<p class='selected-file'>" + label + "</p>");
    }
    $('.selected-file').before().html("<p class='selected-file'>" + label + "</p>");
});
</script>
